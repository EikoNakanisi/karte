
<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12 bg-info"><h4>観察項目の検索フォーム</h4></div>
  </div>
</div>
<br>
<%# form_for の代わりに search_form_for を使うことで検索フォームを作成 %>
<%= form_for(@q, url: search_observations_path) do |f| %>

<form>
  <div class="form-group">
  <%# start 特定の文字列で始まる商品名で検索 %>
  <%= f.label :pt_no_start, "患者ＩＤ" %>
  <%= f.search_field :pt_no_start %>
  </div>
  <div class="form-group">
  <%# start 特定の文字列で始まる商品名で検索 %>
  <%= f.label :ob_name_start, "観察名" %>
  <%= f.search_field :ob_name_start %>
  </div>
  <div class="form-group">
  <%= f.label :category_cont, "category含まれる文字列入力" %>
  <%= f.search_field :category_cont %>
  </div>
</form>
  <%= f.button class: 'btn btn-default btn-primary' do %>
    <i class="fa fa-search"></i> 検索
  <% end %>

  <%= f.button class: 'btn btn-default', name: 'export_csv' do %>
    <i class="fa fa-file-text"></i> CSV出力
  <% end %>

<% end %>

<br><br>
<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12 bg-info"><h4>観察項目の検索結果</h4></div>
  </div>
</div>


<table class="table table-striped table-bordered table-condensed table-hover">
  <tr>
   <th style="width:2%" class="text-right">患者id</th>
   <th style="width:6%" class="text-right">category</th>
   <th style="width:18%" class="text-right">名前</th>
   <th style="width:8%" class="text-center">1day日勤</th> 
   <th style="width:8%" class="text-center">1day準夜</th> 
   <th style="width:8%" class="text-center">2day深夜</th>
   <th style="width:8%" class="text-center">2day日勤</th> 
   <th style="width:8%" class="text-center">2day準夜</th> 
   <th style="width:8%" class="text-center">3day深夜</th>
   <th style="width:8%" class="text-center">3day日勤</th> 
   <th style="width:8%" class="text-center">3day準夜</th> 
   <th style="width:8%" class="text-center">4day深夜</th>
   <th style="width:2%" class="text-right">id</th>
  </tr>
  <% @observations.each do |observation| %>

  <tr>
   <th style="width:2%" class="text-center"><%= observation.pt_no %></th>
   <th style="width:6%" class="text-center"><%= observation.category %></th>
   <th style="width:18%" class="text-right"><%= observation.ob_name %></th>
   <td style="width:8%" class="text-center"><%= observation.n_1d %></td>
   <td style="width:8%" class="text-center"><%= observation.j_1d %></td> 
   <td style="width:8%" class="text-center"><%= observation.s_2d %></td> 
   <td style="width:8%" class="text-center"><%= observation.n_2d %></td>
   <td style="width:8%" class="text-center"><%= observation.j_2d %></td> 
   <td style="width:8%" class="text-center"><%= observation.s_3d %></td> 
   <td style="width:8%" class="text-center"><%= observation.n_3d %></td>
   <td style="width:8%" class="text-center"><%= observation.j_3d %></td> 
   <td style="width:8%" class="text-center"><%= observation.s_4d %></td> 
   <td style="width:2%" class="text-center"><%= observation.id %></td>
  </tr>

  <% end %>
</table>

<%= form_tag import_observations_path, multipart: true do %>
  <%= file_field_tag :file %>
  <%= submit_tag "インポート" %>
<% end %>
