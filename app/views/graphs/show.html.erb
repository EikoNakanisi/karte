<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<div class="container-fluid">
<div class="row">

<div class="col-sm-12">
    <div class="bs-docs-header" id="content">
      <div class="container">
        <div class="col-sm-3"><h2>
          <ruby><rb><%= @patient.p_name %><rt><%= @patient.p_kana %></ruby>
        </h2></div>

<% if @patient.gender == '男' %>
<div class="col-sm-1"><br><img border="0" src="../images/men1.png" width="60" height="60" alt="男性" title="男性"></div>
<% else %>
<div class="col-sm-1"><br><img border="0" src="../images/women1.png" width="60" height="60" alt="女性" title="女性"></div>
<% end %>


<div class="col-sm-4"><br><h4>生年月日：<%= @patient.birth_date.strftime('%Y年%m月%d日') %><br><%= @patient.age %>歳</h4></div>
<div class="col-sm-4"><br><h4>感染症：<%= @patient.infection %><br>アレルギー：<%= @patient.allergic %></h4></div>
</div>
</div>
</div>


<div class="col-sm-10">
<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>



<script>
Highcharts.setOptions({
    colors: ['#1E90FF', '#FF69B4', '#32CD32', '#32CD32', '#708090']
});

Highcharts.chart('container', {
    chart: {
        zoomType: 'xy'
    },
    title: {
        text: ''
    },
    subtitle: {
        text: ''
    },
    xAxis: [{
        categories: ['日勤', '準夜', '深夜', '日勤', '準夜',
            '深夜', '日勤', '準夜', '深夜'],
        crosshair: true
    }],
    
    plotOptions: {
        series: {
            marker: {
                radius: 5,
                
            }
        }
    },
    
    yAxis: [{ // Primary yAxis
        labels: {
            format: '',
            style: {
                color: Highcharts.getOptions().colors[4]
            }
        },
        
        title: {
            text: '呼吸',
            style: {
                color: Highcharts.getOptions().colors[4]
            }
        },
               tickInterval: 5,
                min: 0

    }, { // Secondary yAxis
        gridLineWidth: 0,
        title: {
            text: '体温',
            style: {
                color: Highcharts.getOptions().colors[0]
            }
        },
        labels: {
            format: '',
            style: {
                color: Highcharts.getOptions().colors[0]
            }
        }



    }, { // 3 yAxis
        gridLineWidth: 0,
        title: {
            text: '脈拍',
            style: {
                color: Highcharts.getOptions().colors[1]
            }
        },
        labels: {
            format: '',
            style: {
                color: Highcharts.getOptions().colors[1]
            }
        },
               tickInterval: 40,
                min: 0


    }, { // 4 yAxis
        gridLineWidth: 0,
        title: {
            text: '血圧',
            style: {
                color: Highcharts.getOptions().colors[3]
            }
        },
        labels: {
            format: '',
            style: {
                color: Highcharts.getOptions().colors[3]
            }
            
        },
               tickInterval: 40,
                min: 0





    }],
    tooltip: {
        shared: true
    },
    legend: {
                align: 'left',
                verticalAlign: 'top',
                borderWidth: 0
    },
    series: [{
        name: '体温',
        yAxis: 1,
        data: [36.2, 36.9, 36.9, 36.5, 35.8, 37.0, 35.6, 38.5, 36.4],
        tooltip: {
            valueSuffix: ''
        }

    }, {
        name: '脈拍',
        yAxis: 2,
        data: [88, 87, 85, 90, 78, 86, 80, 66, 78],
        dashStyle: 'ShortDash',
        tooltip: {
            valueSuffix: ''
        }

    }, {
        name: '収縮期血圧',
        yAxis: 3,
        marker: {
            symbol: 'triangle'
        },
        type: 'line',
        data: [140, 132, 134, 145, 182, 111, 125, 126, 140],
        dashStyle: 'Dot',
        tooltip: {
            valueSuffix: ''
        }

    }, {
        name: '拡張期血圧',
        yAxis: 3,
        marker: {
            symbol: 'triangle'
        },
        type: 'line',
        data: [80, 82, 74, 75, 82, 91, 85, 76, 70],
        dashStyle: 'Dot',
        tooltip: {
            valueSuffix: ''
        }

    }, {
        name: '呼吸',
        yAxis: 0,
        marker: {
            symbol: 'square'
        },
        data: [12, 15, 16, 14, 18, 21, 20, 22, 18],
        tooltip: {
            valueSuffix: ''
        },
        dashStyle: 'shortdot'


    }]
,
    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});

</script>



<table class="table table-striped table-bordered table-condensed table-hover">
  <tr>
   <th colspan="2" style="width:27%" class="text-right">日付</th>
   <th colspan="3" style="width:24%" class="text-center">00/00</th>
   <th colspan="3" style="width:24%" class="text-center">00/00</th> 
   <th colspan="3" style="width:24%" class="text-center">00/00</th> 

  </tr>

  <tr>
   <th colspan="2" style="width:27%" class="text-right">時間</th>
   <th style="width:8%" class="text-center">日勤</th> 
   <th style="width:8%" class="text-center">準夜</th> 
   <th style="width:8%" class="text-center">深夜</th>
   <th style="width:8%" class="text-center">日勤</th> 
   <th style="width:8%" class="text-center">準夜</th> 
   <th style="width:8%" class="text-center">深夜</th>
   <th style="width:8%" class="text-center">日勤</th> 
   <th style="width:8%" class="text-center">準夜</th> 
   <th style="width:8%" class="text-center">深夜</th>
 </tr>

<% @kansatus.each do |kansatu| %>
<% unless kansatu.category == 'バイタル' %>
  <tr>
   <th style="width:7%" class="text-center"><%= kansatu.category %></th>
   <th style="width:20%" class="text-right"><%= kansatu.ob_name %></th>
   <td style="width:8%"><%= kansatu.n_1d %></td>
   <td style="width:8%"><%= kansatu.j_1d %></td> 
   <td style="width:8%"><%= kansatu.s_2d %></td> 
   <td style="width:8%"><%= kansatu.n_2d %></td>
   <td style="width:8%"><%= kansatu.j_2d %></td> 
   <td style="width:8%"><%= kansatu.s_3d %></td> 
   <td style="width:8%"><%= kansatu.n_3d %></td>
   <td style="width:8%"><%= kansatu.j_3d %></td> 
   <td style="width:8%"><%= kansatu.s_4d %></td> 
  </tr>
  
<% end %>
<% end %>

</table>
</div>

<div class="row col-sm-2">
<%= render 'layouts/sidebar' %>
</div>

<%= link_to '一覧', graphs_path %>
